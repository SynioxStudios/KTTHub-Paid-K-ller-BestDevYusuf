-- KTT PAID KILL FARM - Gelişmiş Player Tracker
-- Yapımcı: ByYusuf

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")

JoinButton.MouseButton1Click:Connect(function()
    local targetName = PlayerInput.Text
    if targetName == "" then return end
    
    PlayerInput.Text = "Aranıyor: " .. targetName
    
    -- 1. ADIM: Mevcut server'ı kontrol et
    for _, v in pairs(game.Players:GetPlayers()) do
        if v.Name:lower() == targetName:lower() then
            PlayerInput.Text = "Aynı serverda! TP..."
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.Character.HumanoidRootPart.CFrame * CFrame.new(0,0,3)
            return
        end
    end

    -- 2. ADIM: Farklı server'ları tara (Deep Search)
    PlayerInput.Text = "Serverlar taranıyor..."
    
    local success, result = pcall(function()
        -- Muscle Legends server listesini çeken API
        local url = "https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"
        local serverList = HttpService:JSONDecode(game:HttpGet(url))
        
        for _, server in pairs(serverList.data) do
            -- Her server'daki oyuncu sayısına ve verisine bakıyoruz
            -- Not: Bu işlem bazı exploitlerde 'game:HttpGet' izni gerektirir.
            if server.playing < server.maxPlayers then
                -- Burada teknik olarak oyuncu ismini o server'a girmeden kontrol etmek 
                -- Roblox'un yeni gizlilik ayarları nedeniyle kısıtlıdır. 
                -- Ancak script seni 'potansiyel' serverlara hızlıca zıplatabilir.
                TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id, game.Players.LocalPlayer)
                break
            end
        end
    end)

    if not success then
        PlayerInput.Text = "Hata: API Kısıtlı!"
        warn("Hata detayı: ", result)
    end
end)
