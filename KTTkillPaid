-- KTT PAID KILL FARM - Tag Hunter (Server Hopper)
-- Yapımcı: ByYusuf

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")

-- (GUI Kodları aynı kalıyor, sadece JoinButton fonksiyonunu tamamen değiştiriyoruz)

JoinButton.MouseButton1Click:Connect(function()
    local searchTag = PlayerInput.Text:lower() -- Yazdığın tag (Örn: srx_)
    if searchTag == "" then return end
    
    PlayerInput.Text = "Tag taranıyor: " .. searchTag
    
    -- 1. ADIM: Mevcut server'da var mı?
    for _, v in pairs(Players:GetPlayers()) do
        if v.Name:lower():sub(1, #searchTag) == searchTag then
            PlayerInput.Text = "Burada bulundu! TP..."
            Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.Character.HumanoidRootPart.CFrame * CFrame.new(0,0,3)
            return
        end
    end

    -- 2. ADIM: Diğer server'ları taramaya başla
    PlayerInput.Text = "Serverlar taranıyor..."
    
    local function SearchEmptyServers()
        local url = "https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Desc&limit=100"
        local success, result = pcall(function()
            return HttpService:JSONDecode(game:HttpGet(url))
        end)
        
        if success and result and result.data then
            for _, server in pairs(result.data) do
                if server.playing < server.maxPlayers and server.id ~= game.JobId then
                    -- Bu kısım seni rastgele serverlara hızlıca atar (Hop)
                    -- Çünkü direkt server içine girmeden isimleri görmek Roblox'ta zordur.
                    -- Script seni saniyeler içinde yeni server'a sokar.
                    PlayerInput.Text = "Yeni Server'a Geçiliyor..."
                    TeleportService:TeleportToPlaceInstance(game.PlaceId, server.id, Players.LocalPlayer)
                    break
                end
            end
        else
            PlayerInput.Text = "Hata: API Kısıtlı!"
        end
    end

    SearchEmptyServers()
end)

-- EKSTRA: Otomatik Server Giriş Kontrolü
-- Eğer yeni bir server'a girersek, script otomatik olarak tag'i kontrol etsin
game.Players.PlayerAdded:Connect(function(player)
    -- Buraya girdiğin server'da tag'li birini bulursa uyarı verecek kod eklenebilir.
end)
